language: go
go:
- 1.4
env:
  global:
  - GOBIN=${HOME}/bin
  - PATH=${PATH}:${GOBIN}
  - secure: TcEm3vTS8XzbhEb2R3mWWXxDE03xjv2SNFnL61A/SZCfC4C4d9rDj+5HSZUHNX0TkDbAD7C8MQNKyzdcGRYkYWsniukwKvm0ha/YWRfCRrZIxU/thCBukM1I6NiltaIq8Boea/F+PihOBua7NuNuduF45VmDwUa98ocS1f2kezI=
install:
- mkdir ${HOME}/bin
- go get golang.org/x/tools/cmd/vet
- go get github.com/golang/lint/golint
- go get golang.org/x/tools/cmd/cover
- go get github.com/mattn/goveralls
- go get github.com/modocache/gover
script:
- golint ./...
- go vet ./...
- go get -t ./...
- go test -v -race ./...
- go list -f '{{if len .TestGoFiles}}"go test -coverprofile={{.Dir}}/.coverprofile
  {{.ImportPath}}"{{end}}' ./... | xargs -i sh -c {}
- gover
- goveralls -coverprofile=gover.coverprofile -service=travis-ci -repotoken=$COVERALLS_TOKEN
